<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>iTraderX - Plataforma de Trading</title>
<style>
  /* RESET */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body, html {
    height: 100%;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background-color: #107c66;
    color: white;
  }
  a {
    color: inherit; text-decoration: none;
  }
  /* LOGIN CONTAINER */
  #login-container {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #login-box {
    background: #144d40;
    padding: 30px 40px;
    border-radius: 12px;
    box-shadow: 0 0 25px #0a4c36;
    width: 320px;
  }
  #login-box h2 {
    margin-bottom: 20px;
    text-align: center;
    font-weight: 700;
    letter-spacing: 1px;
  }
  #login-box input {
    width: 100%;
    padding: 12px 10px;
    margin: 10px 0 20px 0;
    border: none;
    border-radius: 6px;
    font-size: 16px;
  }
  #login-box button {
    width: 100%;
    padding: 14px;
    background-color: #06b981;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #login-box button:hover {
    background-color: #04a56f;
  }
  #login-error {
    color: #ff5c5c;
    margin-bottom: 10px;
    text-align: center;
    font-weight: 600;
    display: none;
  }

  /* DASHBOARD */
  #dashboard {
    display: none;
    height: 100vh;
    display: flex;
  }
  /* Sidebar */
  #sidebar {
    background-color: #144d40;
    width: 260px;
    padding: 30px 20px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  #sidebar .logo {
    font-size: 28px;
    font-weight: 700;
    color: #06b981;
    text-align: center;
    margin-bottom: 40px;
  }
  #sidebar nav a {
    display: block;
    padding: 14px 15px;
    margin-bottom: 15px;
    font-size: 17px;
    border-radius: 8px;
    transition: background-color 0.3s ease;
    cursor: pointer;
  }
  #sidebar nav a:hover, #sidebar nav a.active {
    background-color: #06b981;
    color: #fff;
  }
  #sidebar .logout-btn {
    background-color: #ff4c4c;
    border: none;
    padding: 12px;
    border-radius: 8px;
    font-weight: 700;
    cursor: pointer;
    color: white;
    transition: background-color 0.3s ease;
  }
  #sidebar .logout-btn:hover {
    background-color: #cc3d3d;
  }
  /* Main Content */
  #main-content {
    flex-grow: 1;
    background: #1c6e5a;
    padding: 30px 40px;
    overflow-y: auto;
  }
  #main-content h2 {
    margin-bottom: 20px;
  }

  /* Depósito */
  .deposit-section input[type=number] {
    width: 140px;
    padding: 10px;
    font-size: 16px;
    border-radius: 6px;
    border: none;
    margin-right: 10px;
  }
  .deposit-section button {
    padding: 11px 18px;
    background-color: #06b981;
    border: none;
    border-radius: 6px;
    font-weight: 700;
    cursor: pointer;
    color: white;
    transition: background-color 0.3s ease;
  }
  .deposit-section button:hover {
    background-color: #04a56f;
  }
  #deposit-msg {
    margin-top: 15px;
    color: #9cff88;
    font-weight: 600;
  }

  /* TradingView Container */
  #chart-container {
    height: 480px;
  }

  /* Perfil */
  .profile-info p {
    margin-bottom: 12px;
    font-size: 16px;
  }

  /* Responsivo */
  @media (max-width: 700px) {
    #dashboard {
      flex-direction: column;
    }
    #sidebar {
      width: 100%;
      display: flex;
      flex-direction: row;
      padding: 10px 15px;
      overflow-x: auto;
    }
    #sidebar nav a {
      margin: 0 10px 0 0;
      padding: 10px 12px;
      font-size: 14px;
      flex-shrink: 0;
    }
    #main-content {
      padding: 15px 20px;
    }
  }
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login-container">
  <div id="login-box">
    <h2>Login iTraderX</h2>
    <div id="login-error"></div>
    <input type="text" id="username" placeholder="Usuário" autocomplete="off" />
    <input type="password" id="password" placeholder="Senha" autocomplete="off" />
    <button onclick="login()">Entrar</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard">
  <aside id="sidebar">
    <div class="logo">iTraderX</div>
    <nav>
      <a href="#" onclick="showPage('home')" id="nav-home" class="active">Home</a>
      <a href="#" onclick="showPage('charts')" id="nav-charts">Gráficos</a>
      <a href="#" onclick="showPage('deposit')" id="nav-deposit">Depósito</a>
      <a href="#" onclick="showPage('profile')" id="nav-profile">Perfil</a>
    </nav>
    <button class="logout-btn" onclick="logout()">Sair</button>
  </aside>
  <main id="main-content">
    <!-- Páginas dinâmicas -->
    <section id="page-home" class="page" style="display:block;">
      <h2>Bem-vindo, <span id="user-display-name"></span>!</h2>
      <p>Esta é a sua dashboard principal, onde você pode acessar gráficos, fazer depósitos e gerenciar seu perfil.</p>
      <p>Saldo atual: R$ <span id="balance-display">0,00</span></p>
    </section>

    <section id="page-charts" class="page" style="display:none;">
      <h2>Gráficos em Tempo Real</h2>
      <div id="chart-container"></div>
    </section>

    <section id="page-deposit" class="page" style="display:none;">
      <h2>Fazer Depósito</h2>
      <div class="deposit-section">
        <input type="number" id="deposit-amount" min="1" placeholder="Valor para depósito" />
        <button onclick="makeDeposit()">Depositar</button>
        <div id="deposit-msg"></div>
      </div>
      <p>Saldo atual: R$ <span id="balance-display-2">0,00</span></p>
    </section>

    <section id="page-profile" class="page" style="display:none;">
      <h2>Perfil do Usuário</h2>
      <div class="profile-info">
        <p><strong>Usuário:</strong> <span id="profile-username"></span></p>
        <p><strong>Email:</strong> <span id="profile-email">usuario@exemplo.com</span></p>
        <p><strong>Conta aberta em:</strong> <span id="profile-creation-date">2025-06-17</span></p>
      </div>
    </section>
  </main>
</div>

<!-- TradingView Widget Script -->
<script src="https://s3.tradingview.com/tv.js"></script>

<script>
  // Simulação de usuários e senhas
  const usersDB = {
    trader01: { password: "senha123", email: "trader01@itraderx.com" },
    clienteX: { password: "ebinnex2025", email: "clientex@itraderx.com" },
    bybitUser: { password: "bybit2025", email: "bybituser@itraderx.com" }
  };

  let currentUser = null;
  let balance = 0;

  function login() {
    const user = document.getElementById("username").value.trim();
    const pass = document.getElementById("password").value;
    const errDiv = document.getElementById("login-error");
    errDiv.style.display = "none";

    if (!user || !pass) {
      errDiv.textContent = "Preencha usuário e senha.";
      errDiv.style.display = "block";
      return;
    }

    if (usersDB[user] && usersDB[user].password === pass) {
      currentUser = user;
      balance = 0;
      document.getElementById("login-container").style.display = "none";
      document.getElementById("dashboard").style.display = "flex";
      document.getElementById("user-display-name").textContent = currentUser;
      document.getElementById("profile-username").textContent = currentUser;
      updateBalanceDisplays();
      loadTradingView();
      showPage("home");
      clearDepositMessage();
    } else {
      errDiv.textContent = "Usuário ou senha inválidos.";
      errDiv.style.display = "block";
    }
  }

  function logout() {
    currentUser = null;
    balance = 0;
    document.getElementById("username").value = "";
    document.getElementById("password").value = "";
    document.getElementById("login-container").style.display = "flex";
    document.getElementById("dashboard").style.display = "none";
    clearDepositMessage();
  }

  function updateBalanceDisplays() {
    const formattedBalance = balance.toFixed(2).replace(".", ",");
    document.getElementById("balance-display").textContent = formattedBalance;
    document.getElementById("balance-display-2").textContent = formattedBalance;
  }

  function clearDepositMessage() {
    const msg = document.getElementById("deposit-msg");
    msg.style.display = "none";
    msg.textContent = "";
  }

  function makeDeposit() {
    const depositInput = document.getElementById("deposit-amount");
    const amount = parseFloat(depositInput.value);

    if (isNaN(amount) || amount <= 0) {
      alert("Digite um valor válido para depósito.");
      return;
    }
    balance += amount;
    updateBalanceDisplays();
    depositInput.value = "";
    const msg = document.getElementById("deposit-msg");
    msg.textContent = `Depósito de R$ ${amount.toFixed(2).replace(".", ",")} realizado com sucesso!`;
    msg.style.display = "block";
  }

  function showPage(page) {
    // Esconde todas as páginas
    document.querySelectorAll(".page").forEach(p => p.style.display = "none");
    // Remove active de todos links
    document.querySelectorAll("#sidebar nav a").forEach(a => a.classList.remove("active"));
    // Mostra página selecionada
    document.getElementById("page-" + page).style.display = "block";
    // Marca ativo no menu
    document.getElementById("nav-" + page).classList.add("active");
  }

  // TradingView Widget - só carrega 1 vez para otimizar
  let tradingViewLoaded = false;
  function loadTradingView() {
    if(tradingViewLoaded) return;
    tradingViewLoaded = true;

    new TradingView.widget({
      "container_id": "chart-container",
      "width": "100%",
      "height": 480,
      "symbol": "BINANCE:BTCUSDT",
      "interval": "1",
      "timezone": "America/Sao_Paulo",
      "theme": "dark",
      "style": "1",
      "locale": "pt",
      "toolbar_bg": "#f1f3f6",
      "enable_publishing": false,
      "hide_top_toolbar": true,
      "save_image": false,
      "studies": [
        "MACD@tv-basicstudies",
        "RSI@tv-basicstudies"
      ],
      "hide_legend": false,
      "details": true,
      "hotlist": true,
      "calendar": true,
      "news": [
        "headlines"
      ]
    });
  }
</script>
</body>
</html>
